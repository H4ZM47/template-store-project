<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Frontend Test</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 p-8">
    <div class="max-w-4xl mx-auto">
        <h1 class="text-3xl font-bold text-center mb-8">Frontend Test Page</h1>
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
            <!-- API Test Section -->
            <div class="bg-white p-6 rounded-lg shadow">
                <h2 class="text-xl font-semibold mb-4">API Connection Test</h2>
                <button id="test-api" class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">
                    Test Backend Connection
                </button>
                <div id="api-result" class="mt-4 p-3 bg-gray-100 rounded text-sm"></div>
            </div>
            
            <!-- Template Loading Test -->
            <div class="bg-white p-6 rounded-lg shadow">
                <h2 class="text-xl font-semibold mb-4">Template Loading Test</h2>
                <button id="load-templates" class="bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600">
                    Load Templates
                </button>
                <div id="templates-result" class="mt-4 p-3 bg-gray-100 rounded text-sm"></div>
            </div>
            
            <!-- Blog Loading Test -->
            <div class="bg-white p-6 rounded-lg shadow">
                <h2 class="text-xl font-semibold mb-4">Blog Loading Test</h2>
                <button id="load-blog" class="bg-purple-500 text-white px-4 py-2 rounded hover:bg-purple-600">
                    Load Blog Posts
                </button>
                <div id="blog-result" class="mt-4 p-3 bg-gray-100 rounded text-sm"></div>
            </div>
            
            <!-- Category Loading Test -->
            <div class="bg-white p-6 rounded-lg shadow">
                <h2 class="text-xl font-semibold mb-4">Category Loading Test</h2>
                <button id="load-categories" class="bg-orange-500 text-white px-4 py-2 rounded hover:bg-orange-600">
                    Load Categories
                </button>
                <div id="categories-result" class="mt-4 p-3 bg-gray-100 rounded text-sm"></div>
            </div>
        </div>
        
        <!-- Results Display -->
        <div class="mt-8 bg-white p-6 rounded-lg shadow">
            <h2 class="text-xl font-semibold mb-4">Test Results</h2>
            <div id="test-results" class="space-y-2 text-sm"></div>
        </div>
    </div>

    <script>
        const API_BASE = 'http://localhost:8080/api/v1';
        
        function addResult(message, type = 'info') {
            const results = document.getElementById('test-results');
            const div = document.createElement('div');
            div.className = `p-2 rounded ${type === 'error' ? 'bg-red-100 text-red-800' : type === 'success' ? 'bg-green-100 text-green-800' : 'bg-blue-100 text-blue-800'}`;
            div.textContent = `${new Date().toLocaleTimeString()}: ${message}`;
            results.appendChild(div);
        }
        
        // Test API Connection
        document.getElementById('test-api').addEventListener('click', async () => {
            try {
                const response = await fetch(`${API_BASE}/health`);
                const data = await response.json();
                document.getElementById('api-result').innerHTML = `<pre>${JSON.stringify(data, null, 2)}</pre>`;
                addResult('âœ… Backend API connection successful', 'success');
            } catch (error) {
                document.getElementById('api-result').textContent = `Error: ${error.message}`;
                addResult(`âŒ Backend API connection failed: ${error.message}`, 'error');
            }
        });
        
        // Test Template Loading
        document.getElementById('load-templates').addEventListener('click', async () => {
            try {
                const response = await fetch(`${API_BASE}/templates`);
                const data = await response.json();
                document.getElementById('templates-result').innerHTML = `<pre>${JSON.stringify(data, null, 2)}</pre>`;
                addResult(`âœ… Loaded ${data.templates.length} templates`, 'success');
            } catch (error) {
                document.getElementById('templates-result').textContent = `Error: ${error.message}`;
                addResult(`âŒ Template loading failed: ${error.message}`, 'error');
            }
        });
        
        // Test Blog Loading
        document.getElementById('load-blog').addEventListener('click', async () => {
            try {
                const response = await fetch(`${API_BASE}/blog`);
                const data = await response.json();
                document.getElementById('blog-result').innerHTML = `<pre>${JSON.stringify(data, null, 2)}</pre>`;
                addResult(`âœ… Loaded ${data.posts.length} blog posts`, 'success');
            } catch (error) {
                document.getElementById('blog-result').textContent = `Error: ${error.message}`;
                addResult(`âŒ Blog loading failed: ${error.message}`, 'error');
            }
        });
        
        // Test Category Loading
        document.getElementById('load-categories').addEventListener('click', async () => {
            try {
                const response = await fetch(`${API_BASE}/categories`);
                const data = await response.json();
                document.getElementById('categories-result').innerHTML = `<pre>${JSON.stringify(data, null, 2)}</pre>`;
                addResult(`âœ… Loaded ${data.categories.length} categories`, 'success');
            } catch (error) {
                document.getElementById('categories-result').textContent = `Error: ${error.message}`;
                addResult(`âŒ Category loading failed: ${error.message}`, 'error');
            }
        });
        
        // Auto-run API test on page load
        window.addEventListener('load', () => {
            addResult('ðŸš€ Frontend test page loaded successfully');
            document.getElementById('test-api').click();
        });
    </script>
</body>
</html>
